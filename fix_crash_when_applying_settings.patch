Author: Unrud <unrud@outlook.com>
Description: fix a bug crashing the game, when applying new settings
Last-Update: 2019-05-10
--- a/src/FretsOnFire.py
+++ b/src/FretsOnFire.py
@@ -86,6 +86,7 @@
         pass
     except KeyboardInterrupt:
         pass
+    engine.quit(close_audio=True)
 
     if engine.restartRequested:
       Log.notice("Restarting.")
@@ -109,4 +110,3 @@
       break
     else:
       break
-  engine.quit()
--- a/src/GameEngine.py
+++ b/src/GameEngine.py
@@ -245,9 +245,10 @@
     else:
       self.quit()
     
-  def quit(self):
-    self.audio.close()
+  def quit(self, close_audio=False):
     Engine.quit(self)
+    if close_audio:
+      self.audio.close()
 
   def resizeScreen(self, width, height):
     """
